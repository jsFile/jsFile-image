!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("JsFile")):"function"==typeof define&&define.amd?define(["JsFile"],b):"object"==typeof exports?exports.JsFileImage=b(require("JsFile")):a.JsFileImage=b(a.JsFile)}(this,function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(b,"__esModule",{value:!0});var i=c(1),j=d(i),k=c(2),l=d(k),m=c(3),n=d(m),o=c(4),p=d(o),q=j["default"].Engine,r=j["default"].defineEngine,s={extension:["gif","jpg","jpeg","png","svg","ico","tif","tiff"],mime:["image/gif","image/jpg","image/jpeg","image/pjpeg","image/png","image/svg+xml","image/x-icon","image/tiff","image/tiff-fx","image/vnd.microsoft.icon"]},t={extension:["wbmp"],mime:["image/vnd.wap.wbmp"]};s.extension.push.apply(s.extension,t.extension),s.mime.push.apply(s.mime,t.mime);var u=function(a){function b(){e(this,b);var a=f(this,Object.getPrototypeOf(b).apply(this,arguments));return a.createDocument=n["default"],a.files=s,a.parser=l["default"],a.parseWbmp=p["default"],a}return g(b,a),h(b,[{key:"isWbmp",value:function(){return Boolean(this.file&&q.validateFile(this.file,t))}}],[{key:"test",value:function(a){return Boolean(a&&q.validateFile(a,s))}}]),b}(q);u.mimeTypes=s.mime.slice(0),r(u),b["default"]=u},function(b,c){b.exports=a},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){return new Promise(function(a,b){var c=void 0,d=this.fileName;c=this.isWbmp()?this.parseWbmp():this.readFileEntry({file:this.file,method:"readAsDataURL"}).then(function(a){return{properties:{src:j(a,d)}}}),c.then(function(c){return"function"!=typeof this.createDocument?void b(new Error(i)):void this.createDocument(c).then(a,b)}.bind(this)),c["catch"](b)}.bind(this))}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e;var f=c(1),g=d(f),h=g["default"].Engine,i=h.errors.notFoundMethodCreateDocument,j=h.normalizeDataUri},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){var b=this;return new Promise(function(c){var d=h.elementPrototype,e=h.elementPrototype,f=b.fileName;d.properties.tagName="DIV",e.properties.tagName="IMG",e.properties.src=a.properties.src,d.children.push(e),c(new h({meta:{name:f},content:[d]}))})}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=e;var f=c(1),g=d(f),h=g["default"].Document},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){var d=b?255:0;return a[c++]=d,a[c++]=d,a[c++]=d,a[c++]=255,c}function f(a){function b(a){for(var b=0,c=void 0;void 0===c;){4261412864&b&&(c=null);var e=a[d++];b=b<<7|127&e,128&e||(c=b)}return c}var c=new Uint8Array(a),d=0;if(0!==b(c))return null;var f=255&c[d++];if(0!==f)return null;var g=b(c),h=b(c);if(0===g||g>65535||0==h||h>65535)return null;var i=document.createElement("canvas");i.setAttribute("width",g),i.setAttribute("height",h);for(var j=i.getContext("2d"),k=j.createImageData(g,h),l=k.data,m=0;h>m;++m)for(var n=0;g>n;n+=8){var o=c[d++],p=4*(m*g+n);p=e(l,128&o,p),p=e(l,64&o,p),p=e(l,32&o,p),p=e(l,16&o,p),p=e(l,8&o,p),p=e(l,4&o,p),p=e(l,2&o,p),p=e(l,1&o,p)}return d>c.length?null:(j.putImageData(k,0,0),i.toDataURL("image/png"))}function g(){return this.readFileEntry({file:this.file,method:"readAsArrayBuffer"}).then(function(a){var b=f(a);if(!b)throw new Error(j);return{properties:{src:b}}})}Object.defineProperty(b,"__esModule",{value:!0}),b["default"]=g;var h=c(1),i=d(h),j=i["default"].Engine.errors.invalidReadFile}])});